rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Authorized email addresses - MUST match your authorizedUsers.ts file
    function isAuthorizedUser() {
      return request.auth != null && 
             request.auth.token.email in [
               'your-email@gmail.com',  // Replace with your actual emails
               'admin@familyfirstenergy.com'  // Replace with real emails
               // Add more authorized emails here - KEEP IN SYNC with authorizedUsers.ts
             ];
    }
    
    // Protect appointments collection
    match /appointments/{appointmentId} {
      allow read, write: if isAuthorizedUser();
    }
    
    // Protect any other collections you might add
    match /{document=**} {
      allow read, write: if isAuthorizedUser();
    }
  }
} 